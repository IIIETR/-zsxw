import{E as L}from"./el-button-Vz7gUebT.js";import{E as $,a as q}from"./el-col-1lRPwNk2.js";import{E as N}from"./el-checkbox-VZIYRt3G.js";import{E as R,a as z}from"./el-form-item-n_wVbnK7.js";import{E as F}from"./el-link-55aksEqv.js";import{E as M}from"./el-input-oZX9Zjx8.js";import{r as _,u as P,w as T,o as g,c as v,a as o,b as e,d,e as t,f as x,g as j,E,h as A,i as D,j as b,l as w,p as G,k as H}from"./index-KQSsqUe5.js";/* empty css                   */import{_ as J}from"./_plugin-vue_export-helper-x3n3nnut.js";import"./isEqual-2TOXbJjj.js";import"./_baseClone-JwZhXCHB.js";const S=i=>(G("data-v-4d8e68c8"),i=i(),H(),i),K=S(()=>x("h1",null,"注册",-1)),O=S(()=>x("h1",null,"登录",-1)),Q={class:"flex"},W={__name:"LoginPage",setup(i){const u=_(!1),m=_(),a=_({username:"",password:"",repassword:""}),V={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,max:10,message:"用户名必须是5-10位的字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是6-15位的非空字符",trigger:"blur"}],repassword:[{required:!0,message:"该选项不能为空",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是6-15的非空字符",trigger:"blur"},{validator:(f,l,n)=>{l!==a.value.password?n(new Error("两次输入密码不一致!")):n()},trigger:"blur"}]},C=async()=>{await m.value.validate(),console.log("开始注册请求"),await j(a.value),E.success("注册成功"),u.value=!1},I=P(),U=async()=>{await m.value.validate();const f=await A(a.value);I.setToken(f.data.token),console.log("开始登陆",f),E.success("登陆成功~"),D.push("/")};return T(u,()=>{a.value={username:"",password:"",repassword:""}}),(f,l)=>{const n=q,s=R,p=M,k=L,c=F,y=z,h=N,B=$;return g(),v(B,{class:"login-page"},{default:o(()=>[e(n,{span:12,class:"bg"}),e(n,{span:6,offset:3,class:"form"},{default:o(()=>[u.value?(g(),v(y,{key:0,model:a.value,rules:V,ref_key:"form",ref:m,size:"large",autocomplete:"off"},{default:o(()=>[e(s,null,{default:o(()=>[K]),_:1}),e(s,{prop:"username"},{default:o(()=>[e(p,{modelValue:a.value.username,"onUpdate:modelValue":l[0]||(l[0]=r=>a.value.username=r),"prefix-icon":d(b),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),e(s,{prop:"password"},{default:o(()=>[e(p,{modelValue:a.value.password,"onUpdate:modelValue":l[1]||(l[1]=r=>a.value.password=r),"prefix-icon":d(w),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),e(s,{prop:"repassword"},{default:o(()=>[e(p,{modelValue:a.value.repassword,"onUpdate:modelValue":l[2]||(l[2]=r=>a.value.repassword=r),"prefix-icon":d(w),type:"password",placeholder:"请输入再次密码"},null,8,["modelValue","prefix-icon"])]),_:1}),e(s,null,{default:o(()=>[e(k,{onClick:C,class:"button",type:"primary","auto-insert-space":""},{default:o(()=>[t("注册")]),_:1})]),_:1}),e(s,{class:"flex"},{default:o(()=>[e(c,{type:"info",underline:!1,onClick:l[3]||(l[3]=r=>u.value=!1)},{default:o(()=>[t(" ← 返回 ")]),_:1})]),_:1})]),_:1},8,["model"])):(g(),v(y,{key:1,model:a.value,rules:V,ref_key:"form",ref:m,size:"large",autocomplete:"off"},{default:o(()=>[e(s,null,{default:o(()=>[O]),_:1}),e(s,{prop:"username"},{default:o(()=>[e(p,{modelValue:a.value.username,"onUpdate:modelValue":l[4]||(l[4]=r=>a.value.username=r),"prefix-icon":d(b),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),e(s,{prop:"password"},{default:o(()=>[e(p,{modelValue:a.value.password,"onUpdate:modelValue":l[5]||(l[5]=r=>a.value.password=r),name:"password","prefix-icon":d(w),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),e(s,{class:"flex"},{default:o(()=>[x("div",Q,[e(h,null,{default:o(()=>[t("记住我")]),_:1}),e(c,{type:"primary",underline:!1},{default:o(()=>[t("忘记密码？")]),_:1})])]),_:1}),e(s,null,{default:o(()=>[e(k,{onClick:U,class:"button",type:"primary","auto-insert-space":""},{default:o(()=>[t("登录")]),_:1})]),_:1}),e(s,{class:"flex"},{default:o(()=>[e(c,{type:"info",underline:!1,onClick:l[6]||(l[6]=r=>u.value=!0)},{default:o(()=>[t(" 注册 → ")]),_:1})]),_:1})]),_:1},8,["model"]))]),_:1})]),_:1})}}},ne=J(W,[["__scopeId","data-v-4d8e68c8"]]);export{ne as default};
