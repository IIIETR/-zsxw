import{E as S}from"./el-button-Vz7gUebT.js";import{a as V,E as k}from"./el-col-1lRPwNk2.js";import{E as y,a as U}from"./el-form-item-n_wVbnK7.js";import{E as x}from"./el-input-oZX9Zjx8.js";import{r as m,bY as C,u as R,W as F,o as N,c as q,a as r,b as e,e as _,bZ as B,E as $}from"./index-KQSsqUe5.js";import"./_baseClone-JwZhXCHB.js";const Z={__name:"UserPassword",setup(h){const l=m({old_pwd:"",new_pwd:"",re_pwd:""}),i={old_pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(u,o,t)=>{o===l.value.old_pwd?t(new Error("原密码和新密码不能一样!")):t()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次确认新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(u,o,t)=>{o!==l.value.new_pwd?t(new Error("新密码和确认再次输入的新密码不一样!")):t()},trigger:"blur"}]},n=m(),c=C(),d=R(),w=async()=>{await n.value.validate()&&(await B(l.value),$({type:"success",message:"更换密码成功"}),d.setToken(""),d.setUser({}),c.push("/login"))},f=()=>{n.value.resetFields()};return(u,o)=>{const t=x,s=y,p=S,g=U,v=V,b=k,E=F("page-container");return N(),q(E,{title:"重置密码"},{default:r(()=>[e(b,null,{default:r(()=>[e(v,{span:12},{default:r(()=>[e(g,{model:l.value,rules:i,ref_key:"formRef",ref:n,"label-width":"100px",size:"large"},{default:r(()=>[e(s,{label:"原密码",prop:"old_pwd"},{default:r(()=>[e(t,{modelValue:l.value.old_pwd,"onUpdate:modelValue":o[0]||(o[0]=a=>l.value.old_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,{label:"新密码",prop:"new_pwd"},{default:r(()=>[e(t,{modelValue:l.value.new_pwd,"onUpdate:modelValue":o[1]||(o[1]=a=>l.value.new_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,{label:"确认新密码",prop:"re_pwd"},{default:r(()=>[e(t,{modelValue:l.value.re_pwd,"onUpdate:modelValue":o[2]||(o[2]=a=>l.value.re_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,null,{default:r(()=>[e(p,{onClick:w,type:"primary"},{default:r(()=>[_("修改密码")]),_:1}),e(p,{onClick:f},{default:r(()=>[_("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})}}};export{Z as default};
